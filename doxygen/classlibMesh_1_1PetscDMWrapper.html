<!-- HTML header for doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libMesh: libMesh::PetscDMWrapper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="../styles.css" rel="stylesheet" type="text/css" />
<link href="doxygen_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <nav id="fixedbar">
    <ul id="fixednav">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../support.html">About Us</a></li>
      <li><a href="../publications.html">Publications</a></li>
      <li><a href="../developers.html">Developers</a></li>
      <li><a href="../installation.html">Installation</a></li>
      <li><a href="../examples.html">Examples</a></li>
      <li><a href="../doxygen/index.html">Documentation</a></li>
    </ul>
  </nav>
  <div id="w">
    <header id="logo"><a href="index.html"><span id="logobg">SomeWebsiteLogo</span></a></header>
    <nav id="navigation">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../support.html">About Us</a></li>
        <li><a href="../publications.html">Publications</a></li>
        <li><a href="../developers.html">Developers</a></li>
        <li><a href="../installation.html">Installation</a></li>
        <li><a href="../examples.html">Examples</a></li>
        <li><a href="../doxygen/index.html">Documentation</a></li>
      </ul>
    </nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- <\!--BEGIN TITLEAREA-\-> -->
<!-- <div id="titlearea"> -->
<!-- <table cellspacing="0" cellpadding="0"> -->
<!--  <tbody> -->
<!--  <tr style="height: 56px;"> -->
<!--   <\!--BEGIN PROJECT_LOGO-\-> -->
<!--   <td id="projectlogo"><img alt="Logo" src=""/></td> -->
<!--   <\!--END PROJECT_LOGO-\-> -->
<!--   <\!--BEGIN PROJECT_NAME-\-> -->
<!--   <td style="padding-left: 0.5em;"> -->
<!--    <div id="projectname">libMesh -->
<!--    <\!--BEGIN PROJECT_NUMBER-\->&#160;<span id="projectnumber"></span><\!--END PROJECT_NUMBER-\-> -->
<!--    </div> -->
<!--    <\!--BEGIN PROJECT_BRIEF-\-><div id="projectbrief"></div><\!--END PROJECT_BRIEF-\-> -->
<!--   </td> -->
<!--   <\!--END PROJECT_NAME-\-> -->
<!--   <\!--BEGIN !PROJECT_NAME-\-> -->
<!--    <\!--BEGIN PROJECT_BRIEF-\-> -->
<!--     <td style="padding-left: 0.5em;"> -->
<!--     <div id="projectbrief"></div> -->
<!--     </td> -->
<!--    <\!--END PROJECT_BRIEF-\-> -->
<!--   <\!--END !PROJECT_NAME-\-> -->
<!--   <\!--BEGIN DISABLE_INDEX-\-> -->
<!--    <\!--BEGIN SEARCHENGINE-\-> -->
<!--    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td> -->
<!--    <\!--END SEARCHENGINE-\-> -->
<!--   <\!--END DISABLE_INDEX-\-> -->
<!--  </tr> -->
<!--  </tbody> -->
<!-- </table> -->
<!-- </div> -->
<!-- <\!--END TITLEAREA-\-> -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelibMesh.html">libMesh</a></li><li class="navelem"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html">PetscDMWrapper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classlibMesh_1_1PetscDMWrapper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">libMesh::PetscDMWrapper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acee98aea761f74b78fb6a969f6244286"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#acee98aea761f74b78fb6a969f6244286">PetscDMWrapper</a> ()=default</td></tr>
<tr class="separator:acee98aea761f74b78fb6a969f6244286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112077efd9d815591e2a074a24c6c515"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a112077efd9d815591e2a074a24c6c515">~PetscDMWrapper</a> ()</td></tr>
<tr class="separator:a112077efd9d815591e2a074a24c6c515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d3f9c0a20bdf40beb55266d17615ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a89d3f9c0a20bdf40beb55266d17615ab">clear</a> ()</td></tr>
<tr class="memdesc:a89d3f9c0a20bdf40beb55266d17615ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys and clears all build DM-related data.  <a href="#a89d3f9c0a20bdf40beb55266d17615ab">More...</a><br /></td></tr>
<tr class="separator:a89d3f9c0a20bdf40beb55266d17615ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df0375f2aafe4f68ddb9276ce76798e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a2df0375f2aafe4f68ddb9276ce76798e">init_and_attach_petscdm</a> (<a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, SNES &amp;snes)</td></tr>
<tr class="separator:a2df0375f2aafe4f68ddb9276ce76798e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3e799f2f1b0f60e16518dfd23663461a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a">init_dm_data</a> (unsigned int n_levels)</td></tr>
<tr class="memdesc:a3e799f2f1b0f60e16518dfd23663461a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init all the n_mesh_level dependent data structures.  <a href="#a3e799f2f1b0f60e16518dfd23663461a">More...</a><br /></td></tr>
<tr class="separator:a3e799f2f1b0f60e16518dfd23663461a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bd5c1fa064d2c382a52607f4465c8f"><td class="memItemLeft" align="right" valign="top">DM &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a34bd5c1fa064d2c382a52607f4465c8f">get_dm</a> (unsigned int level)</td></tr>
<tr class="memdesc:a34bd5c1fa064d2c382a52607f4465c8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get reference to DM for the given mesh level.  <a href="#a34bd5c1fa064d2c382a52607f4465c8f">More...</a><br /></td></tr>
<tr class="separator:a34bd5c1fa064d2c382a52607f4465c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6295b51ea21d5501420c2c171ac0afa6"><td class="memItemLeft" align="right" valign="top">PetscSection &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a6295b51ea21d5501420c2c171ac0afa6">get_section</a> (unsigned int level)</td></tr>
<tr class="memdesc:a6295b51ea21d5501420c2c171ac0afa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get reference to PetscSection for the given mesh level.  <a href="#a6295b51ea21d5501420c2c171ac0afa6">More...</a><br /></td></tr>
<tr class="separator:a6295b51ea21d5501420c2c171ac0afa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed2e29d969ca4c92ed1770477aa1a7ba"><td class="memItemLeft" align="right" valign="top">PetscSF &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#aed2e29d969ca4c92ed1770477aa1a7ba">get_star_forest</a> (unsigned int level)</td></tr>
<tr class="memdesc:aed2e29d969ca4c92ed1770477aa1a7ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get reference to PetscSF for the given mesh level.  <a href="#aed2e29d969ca4c92ed1770477aa1a7ba">More...</a><br /></td></tr>
<tr class="separator:aed2e29d969ca4c92ed1770477aa1a7ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ebb64f4d3f5f353f91ac2fcbe6a198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#af9ebb64f4d3f5f353f91ac2fcbe6a198">build_section</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, PetscSection &amp;section)</td></tr>
<tr class="memdesc:af9ebb64f4d3f5f353f91ac2fcbe6a198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes <a class="el" href="classlibMesh_1_1System.html" title="Manages consistently variables, degrees of freedom, and coefficient vectors. ">System</a>, empty PetscSection and populates the PetscSection.  <a href="#af9ebb64f4d3f5f353f91ac2fcbe6a198">More...</a><br /></td></tr>
<tr class="separator:af9ebb64f4d3f5f353f91ac2fcbe6a198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9a1fd9620e6cbef319c215a7341e8d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#ab9a1fd9620e6cbef319c215a7341e8d4">build_sf</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, PetscSF &amp;star_forest)</td></tr>
<tr class="memdesc:ab9a1fd9620e6cbef319c215a7341e8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes <a class="el" href="classlibMesh_1_1System.html" title="Manages consistently variables, degrees of freedom, and coefficient vectors. ">System</a>, empty PetscSF and populates the PetscSF.  <a href="#ab9a1fd9620e6cbef319c215a7341e8d4">More...</a><br /></td></tr>
<tr class="separator:ab9a1fd9620e6cbef319c215a7341e8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5911ff56027bac98ee7000d81ab3c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a6f5911ff56027bac98ee7000d81ab3c2">set_point_range_in_section</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, PetscSection &amp;section, std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;node_map, std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;elem_map, std::map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, unsigned int &gt; &amp;scalar_map)</td></tr>
<tr class="memdesc:a6f5911ff56027bac98ee7000d81ab3c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for build_section.  <a href="#a6f5911ff56027bac98ee7000d81ab3c2">More...</a><br /></td></tr>
<tr class="separator:a6f5911ff56027bac98ee7000d81ab3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cab51fa93c6f9253c31726ac0806755"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a4cab51fa93c6f9253c31726ac0806755">add_dofs_to_section</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, PetscSection &amp;section, const std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;node_map, const std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;elem_map, const std::map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, unsigned int &gt; &amp;scalar_map)</td></tr>
<tr class="memdesc:a4cab51fa93c6f9253c31726ac0806755"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for build_section.  <a href="#a4cab51fa93c6f9253c31726ac0806755">More...</a><br /></td></tr>
<tr class="separator:a4cab51fa93c6f9253c31726ac0806755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba7b04450625db0ab827c0fd4ba26a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a8ba7b04450625db0ab827c0fd4ba26a6">check_section_n_dofs</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, PetscSection &amp;section)</td></tr>
<tr class="memdesc:a8ba7b04450625db0ab827c0fd4ba26a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to sanity check PetscSection construction.  <a href="#a8ba7b04450625db0ab827c0fd4ba26a6">More...</a><br /></td></tr>
<tr class="separator:a8ba7b04450625db0ab827c0fd4ba26a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740f44c588717f1ef575fd2bd3674fe8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a740f44c588717f1ef575fd2bd3674fe8">add_dofs_helper</a> (const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;system, const <a class="el" href="classlibMesh_1_1DofObject.html">DofObject</a> &amp;dof_object, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> local_id, PetscSection &amp;section)</td></tr>
<tr class="memdesc:a740f44c588717f1ef575fd2bd3674fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to reduce code duplication when setting dofs in section.  <a href="#a740f44c588717f1ef575fd2bd3674fe8">More...</a><br /></td></tr>
<tr class="separator:a740f44c588717f1ef575fd2bd3674fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; DM &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a></td></tr>
<tr class="memdesc:a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of DMs for all grid levels.  <a href="#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">More...</a><br /></td></tr>
<tr class="separator:a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b3e77094805a2d401bde805e378210"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; PetscSection &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a></td></tr>
<tr class="memdesc:a48b3e77094805a2d401bde805e378210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of PETScSections for all grid levels.  <a href="#a48b3e77094805a2d401bde805e378210">More...</a><br /></td></tr>
<tr class="separator:a48b3e77094805a2d401bde805e378210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cc7dbdb5d017bbf996e88b05faa63c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; PetscSF &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a></td></tr>
<tr class="memdesc:a57cc7dbdb5d017bbf996e88b05faa63c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of star forests for all grid levels.  <a href="#a57cc7dbdb5d017bbf996e88b05faa63c">More...</a><br /></td></tr>
<tr class="separator:a57cc7dbdb5d017bbf996e88b05faa63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class defines a wrapper around the PETSc DM infrastructure. By coordinating DM data structures with <a class="el" href="namespacelibMesh.html">libMesh</a>, we can use <a class="el" href="namespacelibMesh.html">libMesh</a> mesh hierarchies for geometric multigrid. Additionally, by setting the DM data, we can additionally (with or without multigrid) define recursive fieldsplits of our variables.</p>
<dl class="section author"><dt>Author</dt><dd>Paul T. Bauman, Boris Boutkov </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2018 </dd></dl>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00051">51</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acee98aea761f74b78fb6a969f6244286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee98aea761f74b78fb6a969f6244286">&#9670;&nbsp;</a></span>PetscDMWrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::PetscDMWrapper::PetscDMWrapper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a112077efd9d815591e2a074a24c6c515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112077efd9d815591e2a074a24c6c515">&#9670;&nbsp;</a></span>~PetscDMWrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::PetscDMWrapper::~PetscDMWrapper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00036">36</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8C_source.html#l00041">clear()</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a89d3f9c0a20bdf40beb55266d17615ab">clear</a>();</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a89d3f9c0a20bdf40beb55266d17615ab"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a89d3f9c0a20bdf40beb55266d17615ab">libMesh::PetscDMWrapper::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Destroys and clears all build DM-related data. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00041">petsc_dm_wrapper.C:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a740f44c588717f1ef575fd2bd3674fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740f44c588717f1ef575fd2bd3674fe8">&#9670;&nbsp;</a></span>add_dofs_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::add_dofs_helper </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1DofObject.html">DofObject</a> &amp;&#160;</td>
          <td class="paramname"><em>dof_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&#160;</td>
          <td class="paramname"><em>local_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSection &amp;&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to reduce code duplication when setting dofs in section. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00407">407</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="dof__object_8h_source.html#l00633">libMesh::DofObject::n_dofs()</a>, <a class="el" href="system_8h_source.html#l02105">libMesh::System::n_vars()</a>, and <a class="el" href="system_8h_source.html#l02025">libMesh::System::number()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00340">add_dofs_to_section()</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total_n_dofs_at_dofobject = 0;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// We are assuming variables are also numbered 0 to n_vars()-1</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v = 0; v &lt; system.n_vars(); v++ )</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_dofs_at_dofobject = dof_object.n_dofs(system.number(), v);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">if</span>( n_dofs_at_dofobject &gt; 0 )</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetFieldDof( section,</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                                         local_id,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                                         v,</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                                         n_dofs_at_dofobject );</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          total_n_dofs_at_dofobject += n_dofs_at_dofobject;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  libmesh_assert_equal_to(total_n_dofs_at_dofobject, dof_object.n_dofs(system.number()));</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> =</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    PetscSectionSetDof( section, local_id, total_n_dofs_at_dofobject );</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cab51fa93c6f9253c31726ac0806755"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cab51fa93c6f9253c31726ac0806755">&#9670;&nbsp;</a></span>add_dofs_to_section()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::add_dofs_to_section </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSection &amp;&#160;</td>
          <td class="paramname"><em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>node_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>elem_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, unsigned int &gt; &amp;&#160;</td>
          <td class="paramname"><em>scalar_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function for build_section. </p>
<p>This function will set the DoF info for each "point" in the PetscSection. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00340">340</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8C_source.html#l00407">add_dofs_helper()</a>, <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="system_8h_source.html#l02033">libMesh::System::get_mesh()</a>, <a class="el" href="fe__type_8h_source.html#l00078">libMesh::OrderWrapper::get_order()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="mesh__communication_8C_source.html#l01245">mesh</a>, <a class="el" href="parallel__object_8h_source.html#l00095">libMesh::ParallelObject::n_processors()</a>, <a class="el" href="fe__type_8h_source.html#l00198">libMesh::FEType::order</a>, <a class="el" href="parallel__object_8h_source.html#l00101">libMesh::ParallelObject::processor_id()</a>, <a class="el" href="variable_8h_source.html#l00119">libMesh::Variable::type()</a>, and <a class="el" href="system_8h_source.html#l02133">libMesh::System::variable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00098">build_section()</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">const</span> MeshBase &amp; <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a> = system.get_mesh();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Now we go through and add dof information for each &quot;point&quot;.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// In libMesh, for most finite elements, we just associate those DoFs with the</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// geometric nodes. So can we loop over the nodes we cached in the node_map and</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// the DoFs for each field for that node. We need to give PETSc the local id</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// we built up in the node map.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; nmap : node_map )</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> global_node_id = nmap.first;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> local_node_id = nmap.second;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      libmesh_assert( <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.query_node_ptr(global_node_id) );</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keyword">const</span> Node &amp; node = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node_ref(global_node_id);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a740f44c588717f1ef575fd2bd3674fe8">add_dofs_helper</a>(system,node,local_node_id,section);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// Some finite element types associate dofs with the element. So now we go through</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// any of those with the Elem as the point we add to the PetscSection with accompanying</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// dofs</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; emap : elem_map )</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> global_elem_id = emap.first;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> local_elem_id = emap.second;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      libmesh_assert( <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.query_elem_ptr(global_elem_id) );</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keyword">const</span> Elem &amp; elem = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elem_ref(global_elem_id);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a740f44c588717f1ef575fd2bd3674fe8">add_dofs_helper</a>(system,elem,local_elem_id,section);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// Now add any SCALAR dofs to the PetscSection</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// SCALAR dofs live on the &quot;last&quot; processor, so only work there if there are any</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">if</span> (system.processor_id() == (system.n_processors()-1))</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; smap : scalar_map )</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> local_id = smap.first;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> scalar_var = smap.second;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <span class="comment">// The number of SCALAR dofs comes from the variable order</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> n_dofs = system.variable(scalar_var).type().order.get_order();</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetFieldDof( section, local_id, scalar_var, n_dofs );</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <span class="comment">// In the SCALAR case, there are no other variables associate with the &quot;point&quot;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          <span class="comment">// the total number of dofs on the point is the same as that for the field</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetDof( section, local_id, n_dofs );</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;          CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l01245">mesh_communication.C:1245</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a740f44c588717f1ef575fd2bd3674fe8"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a740f44c588717f1ef575fd2bd3674fe8">libMesh::PetscDMWrapper::add_dofs_helper</a></div><div class="ttdeci">void add_dofs_helper(const System &amp;system, const DofObject &amp;dof_object, dof_id_type local_id, PetscSection &amp;section)</div><div class="ttdoc">Helper function to reduce code duplication when setting dofs in section. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00407">petsc_dm_wrapper.C:407</a></div></div>
<div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9ebb64f4d3f5f353f91ac2fcbe6a198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ebb64f4d3f5f353f91ac2fcbe6a198">&#9670;&nbsp;</a></span>build_section()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::build_section </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSection &amp;&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Takes <a class="el" href="classlibMesh_1_1System.html" title="Manages consistently variables, degrees of freedom, and coefficient vectors. ">System</a>, empty PetscSection and populates the PetscSection. </p>
<p>Take the <a class="el" href="classlibMesh_1_1System.html" title="Manages consistently variables, degrees of freedom, and coefficient vectors. ">System</a> in its current state and an empty PetscSection and then populate the PetscSection. The PetscSection is comprised of global "point" numbers, where a "point" in PetscDM parlance is a geometric entity: node, edge, face, or element. Then, we also add the DoF numbering for each variable for each of the "points". The PetscSection, together the with PetscSF will allow for recursive fieldsplits from the command line using PETSc. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00098">98</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8C_source.html#l00340">add_dofs_to_section()</a>, <a class="el" href="petsc__dm__wrapper_8C_source.html#l00440">check_section_n_dofs()</a>, <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="system_8C_source.html#l00187">libMesh::System::n_local_dofs()</a>, <a class="el" href="system_8h_source.html#l02105">libMesh::System::n_vars()</a>, <a class="el" href="libmesh_8C_source.html#l00876">libMesh::on_command_line()</a>, <a class="el" href="petsc__dm__wrapper_8C_source.html#l00224">set_point_range_in_section()</a>, and <a class="el" href="system_8h_source.html#l02153">libMesh::System::variable_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  START_LOG (<span class="stringliteral">&quot;build_section()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionCreate(system.comm().get(),&amp;section);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Tell the PetscSection about all of our System variables</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetNumFields(section,system.n_vars());</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Set the actual names of all the field variables</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v = 0; v &lt; system.n_vars(); v++ )</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetFieldName( section, v, system.variable_name(v).c_str() );</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// For building the section, we need to create local-to-global map</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// of local &quot;point&quot; ids to the libMesh global id of that point.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// A &quot;point&quot; in PETSc nomenclature is a geometric object that can have</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// dofs associated with it, e.g. Node, Edge, Face, Elem.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// The numbering PETSc expects is continuous for the local numbering.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// Since we&#39;re only using this interface for solvers, then we can just</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// assign whatever local id to any of the global ids. But it is local</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// so we don&#39;t need to worry about processor numbering for the local</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// point ids.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  std::unordered_map&lt;dof_id_type,dof_id_type&gt; node_map;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  std::unordered_map&lt;dof_id_type,dof_id_type&gt; elem_map;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  std::map&lt;dof_id_type,unsigned int&gt; scalar_map;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// First we tell the PetscSection about all of our points that have</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// dofs associated with them.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6f5911ff56027bac98ee7000d81ab3c2">set_point_range_in_section</a>(system, section, node_map, elem_map, scalar_map);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// Now we can build up the dofs per &quot;point&quot; in the PetscSection</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a4cab51fa93c6f9253c31726ac0806755">add_dofs_to_section</a>(system, section, node_map, elem_map, scalar_map);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// Final setup of PetscSection</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// Until Matt Knepley finishes implementing the commented out function</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// below, the PetscSection will be assuming node-major ordering</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// so let&#39;s throw and error if the user tries to use this without</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// node-major order</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacelibMesh.html#adc9fb0dafe70b50cd0848a8142cf57c0">libMesh::on_command_line</a>(<span class="stringliteral">&quot;--node-major-dofs&quot;</span>))</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must use --node-major-dofs with PetscSection!&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">//else if (!system.identify_variable_groups())</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">//  ierr = PetscSectionSetUseFieldOffsets(section,PETSC_TRUE);CHKERRABORT(system.comm().get(),ierr);</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">//else</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">//  {</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">//    std::string msg = &quot;ERROR: Only node-major or var-major ordering supported for PetscSection!\n&quot;;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">//    msg += &quot;       var-group-major ordering not supported!\n&quot;;</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">//    msg += &quot;       Must use --node-major-dofs or set System::identify_variable_groups() = false!\n&quot;;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">//    libmesh_error_msg(msg);</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">//  }</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetUp(section);CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// Sanity checking at least that local_n_dofs match</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  libmesh_assert_equal_to(system.n_local_dofs(),this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a8ba7b04450625db0ab827c0fd4ba26a6">check_section_n_dofs</a>(system, section));</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  STOP_LOG (<span class="stringliteral">&quot;build_section()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a6f5911ff56027bac98ee7000d81ab3c2"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a6f5911ff56027bac98ee7000d81ab3c2">libMesh::PetscDMWrapper::set_point_range_in_section</a></div><div class="ttdeci">void set_point_range_in_section(const System &amp;system, PetscSection &amp;section, std::unordered_map&lt; dof_id_type, dof_id_type &gt; &amp;node_map, std::unordered_map&lt; dof_id_type, dof_id_type &gt; &amp;elem_map, std::map&lt; dof_id_type, unsigned int &gt; &amp;scalar_map)</div><div class="ttdoc">Helper function for build_section. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00224">petsc_dm_wrapper.C:224</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a8ba7b04450625db0ab827c0fd4ba26a6"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a8ba7b04450625db0ab827c0fd4ba26a6">libMesh::PetscDMWrapper::check_section_n_dofs</a></div><div class="ttdeci">dof_id_type check_section_n_dofs(const System &amp;system, PetscSection &amp;section)</div><div class="ttdoc">Helper function to sanity check PetscSection construction. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00440">petsc_dm_wrapper.C:440</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a4cab51fa93c6f9253c31726ac0806755"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a4cab51fa93c6f9253c31726ac0806755">libMesh::PetscDMWrapper::add_dofs_to_section</a></div><div class="ttdeci">void add_dofs_to_section(const System &amp;system, PetscSection &amp;section, const std::unordered_map&lt; dof_id_type, dof_id_type &gt; &amp;node_map, const std::unordered_map&lt; dof_id_type, dof_id_type &gt; &amp;elem_map, const std::map&lt; dof_id_type, unsigned int &gt; &amp;scalar_map)</div><div class="ttdoc">Helper function for build_section. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00340">petsc_dm_wrapper.C:340</a></div></div>
<div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="namespacelibMesh_html_adc9fb0dafe70b50cd0848a8142cf57c0"><div class="ttname"><a href="namespacelibMesh.html#adc9fb0dafe70b50cd0848a8142cf57c0">libMesh::on_command_line</a></div><div class="ttdeci">bool on_command_line(std::string arg)</div><div class="ttdef"><b>Definition:</b> <a href="libmesh_8C_source.html#l00876">libmesh.C:876</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9a1fd9620e6cbef319c215a7341e8d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9a1fd9620e6cbef319c215a7341e8d4">&#9670;&nbsp;</a></span>build_sf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::build_sf </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSF &amp;&#160;</td>
          <td class="paramname"><em>star_forest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Takes <a class="el" href="classlibMesh_1_1System.html" title="Manages consistently variables, degrees of freedom, and coefficient vectors. ">System</a>, empty PetscSF and populates the PetscSF. </p>
<p>The PetscSF (star forest) is a cousin of PetscSection. PetscSection has the DoF info, and PetscSF gives the parallel distribution of the DoF info. So PetscSF should only be necessary when we have more than one MPI rank. Essentially, we are copying the DofMap.send_list(): we are specifying the local dofs, what rank communicates that dof info (for off-processor dofs that are communicated) and the dofs local index on that rank.</p>
<p><a href="https://jedbrown.org/files/StarForest.pdf">https://jedbrown.org/files/StarForest.pdf</a> </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00163">163</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="dof__map_8h_source.html#l00650">libMesh::DofMap::dof_owner()</a>, <a class="el" href="dof__map_8h_source.html#l00599">libMesh::DofMap::first_dof()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="system_8h_source.html#l02049">libMesh::System::get_dof_map()</a>, <a class="el" href="dof__map_8h_source.html#l00450">libMesh::DofMap::get_send_list()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="dof__map_8h_source.html#l00584">libMesh::DofMap::n_local_dofs()</a>, and <a class="el" href="petsc__macro_8h_source.html#l00098">PETSC_COPY_VALUES</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  START_LOG (<span class="stringliteral">&quot;build_sf()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">const</span> DofMap &amp; dof_map = system.get_dof_map();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">const</span> std::vector&lt;dof_id_type&gt; &amp; send_list = dof_map.get_send_list();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Number of ghost dofs that send information to this processor</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">const</span> PetscInt n_leaves = cast_int&lt;PetscInt&gt;(send_list.size());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// Number of local dofs, including ghosts dofs</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keyword">const</span> PetscInt n_roots = dof_map.n_local_dofs() + n_leaves;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// This is the vector of dof indices coming from other processors</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// We need to give this to the PetscSF</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// We&#39;ll be extra paranoid about this ugly double cast</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  static_assert(<span class="keyword">sizeof</span>(PetscInt) == <span class="keyword">sizeof</span>(<a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>),<span class="stringliteral">&quot;PetscInt is not a dof_id_type!&quot;</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  PetscInt * local_dofs = <span class="keyword">reinterpret_cast&lt;</span>PetscInt *<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> *<span class="keyword">&gt;</span>(send_list.data()));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// This is the vector of PetscSFNode&#39;s for the local_dofs.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// For each entry in local_dof, we have to supply the rank from which</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// that dof stems and its local index on that rank.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// PETSc documentation here:</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PetscSF/PetscSFNode.html</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  std::vector&lt;PetscSFNode&gt; sf_nodes(send_list.size());</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; send_list.size(); i++ )</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> incoming_dof = send_list[i];</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#afebcb3616f8c81cda531dec404f2420d">processor_id_type</a> rank = dof_map.dof_owner(incoming_dof);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// Dofs are sorted and continuous on the processor so local index</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// is counted up from the first dof on the processor.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      PetscInt index = incoming_dof - dof_map.first_dof(rank);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      sf_nodes[i].rank  = rank; <span class="comment">/* Rank of owner */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      sf_nodes[i].index = index;<span class="comment">/* Index of dof on rank */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  PetscSFNode * remote_dofs = sf_nodes.data();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSFCreate(system.comm().get(), &amp;star_forest);CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// TODO: We should create pointers to arrays so we don&#39;t have to copy</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">//       and then can use PETSC_OWN_POINTER where PETSc will take ownership</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">//       and delete the memory for us. But then we&#39;d have to use PetscMalloc.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSFSetGraph(star_forest,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                         n_roots,</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                         n_leaves,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                         local_dofs,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                         <a class="code" href="petsc__macro_8h.html#ae087df21a67db9c4b0334f765d1af3bca646b428ebf4477a7cf65ca393b4b5d4f">PETSC_COPY_VALUES</a>,</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                         remote_dofs,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                         <a class="code" href="petsc__macro_8h.html#ae087df21a67db9c4b0334f765d1af3bca646b428ebf4477a7cf65ca393b4b5d4f">PETSC_COPY_VALUES</a>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  STOP_LOG (<span class="stringliteral">&quot;build_sf()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="petsc__macro_8h_html_ae087df21a67db9c4b0334f765d1af3bca646b428ebf4477a7cf65ca393b4b5d4f"><div class="ttname"><a href="petsc__macro_8h.html#ae087df21a67db9c4b0334f765d1af3bca646b428ebf4477a7cf65ca393b4b5d4f">PETSC_COPY_VALUES</a></div><div class="ttdef"><b>Definition:</b> <a href="petsc__macro_8h_source.html#l00098">petsc_macro.h:98</a></div></div>
<div class="ttc" id="namespacelibMesh_html_afebcb3616f8c81cda531dec404f2420d"><div class="ttname"><a href="namespacelibMesh.html#afebcb3616f8c81cda531dec404f2420d">libMesh::processor_id_type</a></div><div class="ttdeci">uint8_t processor_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00099">id_types.h:99</a></div></div>
<div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ba7b04450625db0ab827c0fd4ba26a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba7b04450625db0ab827c0fd4ba26a6">&#9670;&nbsp;</a></span>check_section_n_dofs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> libMesh::PetscDMWrapper::check_section_n_dofs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSection &amp;&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to sanity check PetscSection construction. </p>
<p>The PetscSection contains local dof information. This helper function just facilitates sanity checking that in fact it only has n_local_dofs. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00440">440</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, and <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00098">build_section()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  PetscInt n_local_dofs = 0;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// Grap the starting and ending points from the section</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  PetscInt pstart, pend;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionGetChart(section, &amp;pstart, &amp;pend);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Count up the n_dofs for each point from the section</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">for</span>( PetscInt p = pstart; p &lt; pend; p++ )</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      PetscInt n_dofs;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionGetDof(section,p,&amp;n_dofs);CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      n_local_dofs += n_dofs;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  static_assert(<span class="keyword">sizeof</span>(PetscInt) == <span class="keyword">sizeof</span>(<a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>),<span class="stringliteral">&quot;PetscInt is not a dof_id_type!&quot;</span>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">return</span> n_local_dofs;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div><div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89d3f9c0a20bdf40beb55266d17615ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d3f9c0a20bdf40beb55266d17615ab">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys and clears all build DM-related data. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00041">41</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8h_source.html#l00067">_dms</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00070">_sections</a>, and <a class="el" href="petsc__dm__wrapper_8h_source.html#l00073">_star_forests</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__diff__solver_8C_source.html#l00223">libMesh::PetscDiffSolver::clear()</a>, and <a class="el" href="petsc__dm__wrapper_8C_source.html#l00036">~PetscDMWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// This will also Destroy the attached PetscSection and PetscSF as well</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// Destroy doesn&#39;t free the memory, but just resets points internally</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// in the struct, so we&#39;d still need to wipe out the memory on our side</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">for</span>( <span class="keyword">auto</span> dm_it = <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>.begin(); dm_it &lt; <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>.end(); ++dm_it )</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    DMDestroy( dm_it-&gt;get() );</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>.clear();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a>.clear();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a>.clear();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a57cc7dbdb5d017bbf996e88b05faa63c"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">libMesh::PetscDMWrapper::_star_forests</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSF &gt; &gt; _star_forests</div><div class="ttdoc">Vector of star forests for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00073">petsc_dm_wrapper.h:73</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a48b3e77094805a2d401bde805e378210"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">libMesh::PetscDMWrapper::_sections</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSection &gt; &gt; _sections</div><div class="ttdoc">Vector of PETScSections for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00070">petsc_dm_wrapper.h:70</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">libMesh::PetscDMWrapper::_dms</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; DM &gt; &gt; _dms</div><div class="ttdoc">Vector of DMs for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00067">petsc_dm_wrapper.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34bd5c1fa064d2c382a52607f4465c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34bd5c1fa064d2c382a52607f4465c8f">&#9670;&nbsp;</a></span>get_dm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DM&amp; libMesh::PetscDMWrapper::get_dm </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get reference to DM for the given mesh level. </p>
<p><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a" title="Init all the n_mesh_level dependent data structures. ">init_dm_data()</a> should be called before this function. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00082">82</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8h_source.html#l00067">_dms</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  { libmesh_assert(level &lt; <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>.size());</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> *(<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>[level].get()); }</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">libMesh::PetscDMWrapper::_dms</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; DM &gt; &gt; _dms</div><div class="ttdoc">Vector of DMs for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00067">petsc_dm_wrapper.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6295b51ea21d5501420c2c171ac0afa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6295b51ea21d5501420c2c171ac0afa6">&#9670;&nbsp;</a></span>get_section()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PetscSection&amp; libMesh::PetscDMWrapper::get_section </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get reference to PetscSection for the given mesh level. </p>
<p><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a" title="Init all the n_mesh_level dependent data structures. ">init_dm_data()</a> should be called before this function. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00090">90</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8h_source.html#l00070">_sections</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  { libmesh_assert(level &lt; <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a>.size());</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> *(<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a>[level].get()); }</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a48b3e77094805a2d401bde805e378210"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">libMesh::PetscDMWrapper::_sections</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSection &gt; &gt; _sections</div><div class="ttdoc">Vector of PETScSections for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00070">petsc_dm_wrapper.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed2e29d969ca4c92ed1770477aa1a7ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed2e29d969ca4c92ed1770477aa1a7ba">&#9670;&nbsp;</a></span>get_star_forest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PetscSF&amp; libMesh::PetscDMWrapper::get_star_forest </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get reference to PetscSF for the given mesh level. </p>
<p><a class="el" href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a" title="Init all the n_mesh_level dependent data structures. ">init_dm_data()</a> should be called before this function. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00098">98</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8h_source.html#l00073">_star_forests</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  { libmesh_assert(level &lt; <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a>.size());</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> *(<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a>[level].get()); }</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a57cc7dbdb5d017bbf996e88b05faa63c"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">libMesh::PetscDMWrapper::_star_forests</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSF &gt; &gt; _star_forests</div><div class="ttdoc">Vector of star forests for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00073">petsc_dm_wrapper.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2df0375f2aafe4f68ddb9276ce76798e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2df0375f2aafe4f68ddb9276ce76798e">&#9670;&nbsp;</a></span>init_and_attach_petscdm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::init_and_attach_petscdm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SNES &amp;&#160;</td>
          <td class="paramname"><em>snes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">54</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8C_source.html#l00098">build_section()</a>, <a class="el" href="petsc__dm__wrapper_8C_source.html#l00163">build_sf()</a>, <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00082">get_dm()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00090">get_section()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00098">get_star_forest()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="petsc__dm__wrapper_8C_source.html#l00461">init_dm_data()</a>, <a class="el" href="mesh__tools_8C_source.html#l00653">libMesh::MeshTools::n_levels()</a>, and <a class="el" href="parallel__object_8h_source.html#l00095">libMesh::ParallelObject::n_processors()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__diff__solver_8C_source.html#l00337">libMesh::PetscDiffSolver::setup_petsc_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  START_LOG (<span class="stringliteral">&quot;init_and_attach_petscdm()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Eventually, we&#39;ll traverse the mesh hierarchy and cache</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// for each grid level, but for now, we&#39;re just using the</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// finest level</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a> = 1;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a">init_dm_data</a>(n_levels);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level = 0; level &lt; <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>; level++)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      DM &amp; dm = this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a34bd5c1fa064d2c382a52607f4465c8f">get_dm</a>(level);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      PetscSection &amp; section = this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6295b51ea21d5501420c2c171ac0afa6">get_section</a>(level);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      PetscSF &amp; star_forest = this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#aed2e29d969ca4c92ed1770477aa1a7ba">get_star_forest</a>(level);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = DMShellCreate(system.comm().get(), &amp;dm);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="comment">// Build the PetscSection and attach it to the DM</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#af9ebb64f4d3f5f353f91ac2fcbe6a198">build_section</a>(system, section);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = DMSetDefaultSection(dm, section);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="comment">// We only need to build the star forest if we&#39;re in a parallel environment</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">if</span> (system.n_processors() &gt; 1)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;          <span class="comment">// Build the PetscSF and attach it to the DM</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;          this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#ab9a1fd9620e6cbef319c215a7341e8d4">build_sf</a>(system, star_forest);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;          <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = DMSetDefaultSF(dm, star_forest);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;          CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// We need to set only the finest level DM in the SNES</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  DM &amp; dm = this-&gt;<a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a34bd5c1fa064d2c382a52607f4465c8f">get_dm</a>(0);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  ierr = SNESSetDM(snes, dm);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  STOP_LOG (<span class="stringliteral">&quot;init_and_attach_petscdm()&quot;</span>, <span class="stringliteral">&quot;PetscDMWrapper&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a34bd5c1fa064d2c382a52607f4465c8f"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a34bd5c1fa064d2c382a52607f4465c8f">libMesh::PetscDMWrapper::get_dm</a></div><div class="ttdeci">DM &amp; get_dm(unsigned int level)</div><div class="ttdoc">Get reference to DM for the given mesh level. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00082">petsc_dm_wrapper.h:82</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_ae15ece869d4ef3d283edb677942e8439"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">libMesh::MeshTools::n_levels</a></div><div class="ttdeci">unsigned int n_levels(const MeshBase &amp;mesh)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00653">mesh_tools.C:653</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a6295b51ea21d5501420c2c171ac0afa6"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a6295b51ea21d5501420c2c171ac0afa6">libMesh::PetscDMWrapper::get_section</a></div><div class="ttdeci">PetscSection &amp; get_section(unsigned int level)</div><div class="ttdoc">Get reference to PetscSection for the given mesh level. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00090">petsc_dm_wrapper.h:90</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_aed2e29d969ca4c92ed1770477aa1a7ba"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#aed2e29d969ca4c92ed1770477aa1a7ba">libMesh::PetscDMWrapper::get_star_forest</a></div><div class="ttdeci">PetscSF &amp; get_star_forest(unsigned int level)</div><div class="ttdoc">Get reference to PetscSF for the given mesh level. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00098">petsc_dm_wrapper.h:98</a></div></div>
<div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a3e799f2f1b0f60e16518dfd23663461a"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a3e799f2f1b0f60e16518dfd23663461a">libMesh::PetscDMWrapper::init_dm_data</a></div><div class="ttdeci">void init_dm_data(unsigned int n_levels)</div><div class="ttdoc">Init all the n_mesh_level dependent data structures. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00461">petsc_dm_wrapper.C:461</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_af9ebb64f4d3f5f353f91ac2fcbe6a198"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#af9ebb64f4d3f5f353f91ac2fcbe6a198">libMesh::PetscDMWrapper::build_section</a></div><div class="ttdeci">void build_section(const System &amp;system, PetscSection &amp;section)</div><div class="ttdoc">Takes System, empty PetscSection and populates the PetscSection. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00098">petsc_dm_wrapper.C:98</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_ab9a1fd9620e6cbef319c215a7341e8d4"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#ab9a1fd9620e6cbef319c215a7341e8d4">libMesh::PetscDMWrapper::build_sf</a></div><div class="ttdeci">void build_sf(const System &amp;system, PetscSF &amp;star_forest)</div><div class="ttdoc">Takes System, empty PetscSF and populates the PetscSF. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8C_source.html#l00163">petsc_dm_wrapper.C:163</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e799f2f1b0f60e16518dfd23663461a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e799f2f1b0f60e16518dfd23663461a">&#9670;&nbsp;</a></span>init_dm_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::init_dm_data </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n_levels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Init all the n_mesh_level dependent data structures. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00461">461</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="petsc__dm__wrapper_8h_source.html#l00067">_dms</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00070">_sections</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00073">_star_forests</a>, and <a class="el" href="mesh__tools_8C_source.html#l00653">libMesh::MeshTools::n_levels()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00054">init_and_attach_petscdm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;{</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>.resize(<a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a>.resize(<a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a>.resize(<a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>; i++ )</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">_dms</a>[i] = libmesh_make_unique&lt;DM&gt;();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">_sections</a>[i] = libmesh_make_unique&lt;PetscSection&gt;();</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">_star_forests</a>[i] = libmesh_make_unique&lt;PetscSF&gt;();</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div><div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a57cc7dbdb5d017bbf996e88b05faa63c"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a57cc7dbdb5d017bbf996e88b05faa63c">libMesh::PetscDMWrapper::_star_forests</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSF &gt; &gt; _star_forests</div><div class="ttdoc">Vector of star forests for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00073">petsc_dm_wrapper.h:73</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a48b3e77094805a2d401bde805e378210"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a48b3e77094805a2d401bde805e378210">libMesh::PetscDMWrapper::_sections</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; PetscSection &gt; &gt; _sections</div><div class="ttdoc">Vector of PETScSections for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00070">petsc_dm_wrapper.h:70</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_ae15ece869d4ef3d283edb677942e8439"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">libMesh::MeshTools::n_levels</a></div><div class="ttdeci">unsigned int n_levels(const MeshBase &amp;mesh)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00653">mesh_tools.C:653</a></div></div>
<div class="ttc" id="classlibMesh_1_1PetscDMWrapper_html_a6dd86c2c1f8c3ec57b2cd55f2c0501c6"><div class="ttname"><a href="classlibMesh_1_1PetscDMWrapper.html#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">libMesh::PetscDMWrapper::_dms</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; DM &gt; &gt; _dms</div><div class="ttdoc">Vector of DMs for all grid levels. </div><div class="ttdef"><b>Definition:</b> <a href="petsc__dm__wrapper_8h_source.html#l00067">petsc_dm_wrapper.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f5911ff56027bac98ee7000d81ab3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5911ff56027bac98ee7000d81ab3c2">&#9670;&nbsp;</a></span>set_point_range_in_section()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::PetscDMWrapper::set_point_range_in_section </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1System.html">System</a> &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PetscSection &amp;&#160;</td>
          <td class="paramname"><em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>node_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>elem_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>, unsigned int &gt; &amp;&#160;</td>
          <td class="paramname"><em>scalar_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function for build_section. </p>
<p>This function will count how many "points" on the current processor have DoFs associated with them and give that count to PETSc. We need to cache a mapping between the global node id and our local count that we do in this function because we will need the local number again in the add_dofs_to_section function. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8C_source.html#l00224">224</a> of file <a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a>.</p>

<p class="reference">References <a class="el" href="parallel__object_8h_source.html#l00089">libMesh::ParallelObject::comm()</a>, <a class="el" href="dof__map_8C_source.html#l01930">libMesh::DofMap::dof_indices()</a>, <a class="el" href="fe__type_8h_source.html#l00204">libMesh::FEType::family</a>, <a class="el" href="communicator_8h_source.html#l00141">libMesh::Parallel::Communicator::get()</a>, <a class="el" href="system_8h_source.html#l02049">libMesh::System::get_dof_map()</a>, <a class="el" href="system_8h_source.html#l02033">libMesh::System::get_mesh()</a>, <a class="el" href="dof__object_8h_source.html#l00655">libMesh::DofObject::id()</a>, <a class="el" href="petscdmlibmeshimpl_8C_source.html#l01022">ierr</a>, <a class="el" href="dof__map_8h_source.html#l00738">libMesh::DofMap::local_index()</a>, <a class="el" href="mesh__communication_8C_source.html#l01245">mesh</a>, <a class="el" href="dof__map_8h_source.html#l00584">libMesh::DofMap::n_local_dofs()</a>, <a class="el" href="parallel__object_8h_source.html#l00095">libMesh::ParallelObject::n_processors()</a>, <a class="el" href="dof__map_8h_source.html#l00579">libMesh::DofMap::n_SCALAR_dofs()</a>, <a class="el" href="system_8h_source.html#l02105">libMesh::System::n_vars()</a>, <a class="el" href="system_8h_source.html#l02025">libMesh::System::number()</a>, <a class="el" href="parallel__object_8h_source.html#l00101">libMesh::ParallelObject::processor_id()</a>, <a class="el" href="enum__fe__family_8h_source.html#l00058">libMesh::SCALAR</a>, <a class="el" href="variable_8h_source.html#l00119">libMesh::Variable::type()</a>, and <a class="el" href="system_8h_source.html#l02133">libMesh::System::variable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00098">build_section()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// We&#39;re expecting this to be empty coming in</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  libmesh_assert(node_map.empty());</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// We need to count up the number of active &quot;points&quot; on this processor.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Nominally, a &quot;point&quot; in PETSc parlance is a geometric object that can</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// hold DoFs, i.e node, edge, face, elem. Since we handle the mesh and are only</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// interested in solvers, then the only thing PETSc needs is a unique *local* number</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// for each &quot;point&quot; that has active DoFs; note however this local numbering</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// we construct must be continuous.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// In libMesh, for most finite elements, we just associate those DoFs with the</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// geometric nodes. So can we loop over the nodes on this processor and check</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// if any of the fields are have active DoFs on that node.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// If so, then we tell PETSc about that &quot;point&quot;. At this stage, we just need</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// to count up how many active &quot;points&quot; we have and cache the local number to global id</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// mapping.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// These will be our local counters. pstart should always be zero.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// pend will track our local &quot;point&quot; count.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// If we&#39;re on a processor who coarsened the mesh to have no local elements,</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// we should make an empty PetscSection. An empty PetscSection is specified</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// by passing [0,0) to the PetscSectionSetChart call at the end. So, if we</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// have nothing on this processor, these are the correct values to pass to</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// PETSc.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> pstart = 0;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> pend = 0;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keyword">const</span> MeshBase &amp; <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a> = system.get_mesh();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keyword">const</span> DofMap &amp; dof_map = system.get_dof_map();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// If we don&#39;t have any local dofs, then there&#39;s nothing to tell to the PetscSection</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (dof_map.n_local_dofs() &gt; 0)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">// Conservative estimate of space needed so we don&#39;t thrash</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      node_map.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_local_nodes());</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      elem_map.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_active_local_elem());</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// We loop over active elements and then cache the global/local node mapping to make sure</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">// we only count active nodes. For example, if we&#39;re calling this function and we&#39;re</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">// not the finest level in the Mesh tree, we don&#39;t want to include nodes of child elements</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="comment">// that aren&#39;t active on this level.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; elem : <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.active_local_element_ptr_range())</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = 0; n &lt; elem-&gt;n_nodes(); n++)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              <span class="comment">// get the global id number of local node n</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;              <span class="keyword">const</span> Node &amp; node = elem-&gt;node_ref(n);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;              <span class="comment">// Only register nodes with the PetscSection if they have dofs that belong to</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;              <span class="comment">// this processor. Even though we&#39;re active local elements, the dofs associated</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;              <span class="comment">// with the node may belong to a different processor. The processor who owns</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;              <span class="comment">// those dofs will register that node with the PetscSection on that processor.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;              std::vector&lt;dof_id_type&gt; node_dof_indices;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              dof_map.dof_indices( &amp;node, node_dof_indices );</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;              <span class="keywordflow">if</span>( !node_dof_indices.empty() &amp;&amp; dof_map.local_index(node_dof_indices[0]) )</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                  <span class="comment">// We&#39;re assuming that if the first dof for this node belongs to this processor,</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                  <span class="comment">// then all of them do.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                  <span class="keywordflow">for</span>( <span class="keyword">auto</span> dof : node_dof_indices )</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    libmesh_assert(dof_map.local_index(dof));</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                  <span class="comment">// Cache the global/local mapping if we haven&#39;t already</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                  <span class="comment">// Then increment our local count</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                  <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> node_id = node.id();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                  <span class="keywordflow">if</span>( node_map.count(node_id) == 0 )</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                      node_map.insert(std::make_pair(node_id,pend));</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                      pend++;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;          <span class="comment">// Some finite elements, e.g. Hierarchic, associate element interior DoFs with the element</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          <span class="comment">// rather than the node (since we ought to be able to use Hierachic elements on a QUAD4,</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          <span class="comment">// which has no interior node). Thus, we also need to check element interiors for DoFs</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <span class="comment">// as well and, if the finite element has them, we also need to count the Elem in our</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          <span class="comment">// &quot;point&quot; accounting.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          <span class="keywordflow">if</span>( elem-&gt;n_dofs(system.number()) &gt; 0 )</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;              <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> elem_id = elem-&gt;id();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;              elem_map.insert(std::make_pair(elem_id,pend));</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;              pend++;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// SCALAR dofs live on the &quot;last&quot; processor, so only work there if there are any</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span>( dof_map.n_SCALAR_dofs() &gt; 0 &amp;&amp; (system.processor_id() == (system.n_processors()-1)) )</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <span class="comment">// Loop through all the variables and cache the scalar ones. We cache the</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="comment">// SCALAR variable index along with the local point to make it easier when</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="comment">// we have to register dofs with the PetscSection</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v = 0; v &lt; system.n_vars(); v++ )</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;              <span class="keywordflow">if</span>( system.variable(v).type().family == <a class="code" href="namespacelibMesh.html#abcdbcd8364bf9fb7a67b3b4013031b2daefdbf95da65edcfa0cdb6c10eac5482c">SCALAR</a> )</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                  scalar_map.insert(std::make_pair(pend,v));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                  pend++;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  PetscErrorCode <a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a> = PetscSectionSetChart(section, pstart, pend);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  CHKERRABORT(system.comm().get(),<a class="code" href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="ttc" id="namespacelibMesh_html_abcdbcd8364bf9fb7a67b3b4013031b2daefdbf95da65edcfa0cdb6c10eac5482c"><div class="ttname"><a href="namespacelibMesh.html#abcdbcd8364bf9fb7a67b3b4013031b2daefdbf95da65edcfa0cdb6c10eac5482c">libMesh::SCALAR</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__fe__family_8h_source.html#l00058">enum_fe_family.h:58</a></div></div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l01245">mesh_communication.C:1245</a></div></div>
<div class="ttc" id="petscdmlibmeshimpl_8C_html_a3a0f114e81de25da19e203b1728598bc"><div class="ttname"><a href="petscdmlibmeshimpl_8C.html#a3a0f114e81de25da19e203b1728598bc">ierr</a></div><div class="ttdeci">PetscErrorCode ierr</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmeshimpl_8C_source.html#l01022">petscdmlibmeshimpl.C:1022</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6dd86c2c1f8c3ec57b2cd55f2c0501c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dd86c2c1f8c3ec57b2cd55f2c0501c6">&#9670;&nbsp;</a></span>_dms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;DM&gt; &gt; libMesh::PetscDMWrapper::_dms</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of DMs for all grid levels. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00067">67</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00041">clear()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00082">get_dm()</a>, and <a class="el" href="petsc__dm__wrapper_8C_source.html#l00461">init_dm_data()</a>.</p>

</div>
</div>
<a id="a48b3e77094805a2d401bde805e378210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48b3e77094805a2d401bde805e378210">&#9670;&nbsp;</a></span>_sections</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;PetscSection&gt; &gt; libMesh::PetscDMWrapper::_sections</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of PETScSections for all grid levels. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00070">70</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00041">clear()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00090">get_section()</a>, and <a class="el" href="petsc__dm__wrapper_8C_source.html#l00461">init_dm_data()</a>.</p>

</div>
</div>
<a id="a57cc7dbdb5d017bbf996e88b05faa63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cc7dbdb5d017bbf996e88b05faa63c">&#9670;&nbsp;</a></span>_star_forests</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;PetscSF&gt; &gt; libMesh::PetscDMWrapper::_star_forests</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of star forests for all grid levels. </p>

<p class="definition">Definition at line <a class="el" href="petsc__dm__wrapper_8h_source.html#l00073">73</a> of file <a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="petsc__dm__wrapper_8C_source.html#l00041">clear()</a>, <a class="el" href="petsc__dm__wrapper_8h_source.html#l00098">get_star_forest()</a>, and <a class="el" href="petsc__dm__wrapper_8C_source.html#l00461">init_dm_data()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="petsc__dm__wrapper_8h_source.html">petsc_dm_wrapper.h</a></li>
<li><a class="el" href="petsc__dm__wrapper_8C_source.html">petsc_dm_wrapper.C</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
generated by <a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a>
</small></address>
<!-- dynamic header stuff -->
<script type="text/javascript">
$(document).ready(function(){
  $(window).on('scroll',function() {
    var scrolltop = $(this).scrollTop();
    if(scrolltop >= 215) {
      $('#fixedbar').fadeIn(250);
    }
    else if(scrolltop <= 210) {
      $('#fixedbar').fadeOut(250);
    }
  });
});
</script>
<!-- Google Analytics stuff -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24978333-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
